"use strict";(globalThis["webpackChunkpwaoffline"]=globalThis["webpackChunkpwaoffline"]||[]).push([[57],{2057:(e,a,l)=>{l.r(a),l.d(a,{default:()=>x});l(9665);var o=l(9835),r=(l(4376),l(9302)),t=l(499),n=l(8100),s=l.n(n);const i={class:"col"},u={class:"flex justify-between"},c={__name:"IndexPage",setup(e){const a=(0,r.Z)(),l=(0,t.iH)(null),n=(0,t.iH)(null),c=(0,t.iH)(null),d=(0,t.iH)(null),v=(0,t.iH)([]),b=(0,t.iH)([{datos:null},{datos:null}]),m=async()=>{console.log(b.value);let e=window.indexedDB.open("BaseDatosVariables",1);e.onupgradeneeded=a=>{l.value=e.result,c.value=l.value.createObjectStore("Variables",{keyPath:"id",autoIncrement:!0}),d.value=c.value.createIndex("VariablesDatos","id",{unique:!1})},e.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)},await p(e)},p=e=>{e.onsuccess=a=>{console.log("Base de datos abierta"),l.value=e.result,n.value=l.value.transaction("Variables","readwrite"),c.value=n.value.objectStore("Variables"),d.value=c.value.index("VariablesDatos"),b.value.map(((e,a)=>{console.log(e);let l=e.datos;c.value.put({datos:l,variable:"Variable "+(a+1),fecha:new Date(Date.now()).toLocaleString()})})),l.value.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)},n.value.oncomplete=()=>{l.value.close(),console.log("Transaccion completada")}}},g=()=>{v.value=[];let e=window.indexedDB.open("BaseDatosVariables",1);e.onupgradeneeded=a=>{l.value=e.result,c.value=l.value.createObjectStore("Variables",{keyPath:"id",autoIncrement:!0}),d.value=c.value.createIndex("VariablesDatos","id",{unique:!1})},e.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)},e.onsuccess=a=>{console.log("Base de datos abierta"),l.value=e.result,n.value=l.value.transaction("Variables","readonly"),c.value=n.value.objectStore("Variables"),d.value=c.value.index("VariablesDatos");let o=c.value.openCursor();o.onsuccess=e=>{let a=e.target.result;null!==a&&(console.log("RESULT",a.value),v.value.push(a.value),console.log("REC DATA",v.value),s().fire({title:"Variables",html:`\n        ${v.value.map(((e,a)=>`\n          <div class="col-12 col-sm-6 col-md-4 col-lg-3">\n              <q-card\n      class="my-card text-white"\n      style="background: radial-gradient(circle, #35a2ff 0%, #014a88 100%)"\n    >\n      <q-card-section class="q-pt-none col">\n        ${e.variable}\nvalor ->${e.datos}\nfecha ->${e.fecha}\n      </q-card-section>\n\n    </q-card>\n          </div>\n\n\n    `))}\n        `}),a.continue())},n.value.oncomplete=()=>{l.value.close(),console.log("Transaccion completada")},l.value.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)}}},w=()=>{let e=window.indexedDB.open("BaseDatosVariables",1);e.onupgradeneeded=a=>{l.value=e.result,c.value=l.value.createObjectStore("Variables",{keyPath:"id",autoIncrement:!0}),d.value=c.value.createIndex("VariablesDatos","id",{unique:!1})},e.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)},e.onsuccess=a=>{console.log("Base de datos abierta"),l.value=e.result,n.value=l.value.transaction("Variables","readwrite"),c.value=n.value.objectStore("Variables"),d.value=c.value.index("VariablesDatos");let o=c.value.openCursor();o.onsuccess=e=>{let a=e.target.result;null!==a&&(c.value.delete(a.value.id),a.continue())},n.value.oncomplete=()=>{l.value.close(),console.log("Transaccion completada")},l.value.onerror=e=>{console.log("Error al abrir la base de datos"+e.target.errorCode)}}},V=()=>{s().fire({title:"Variables",html:`\n    ${b.value.map(((e,a)=>`\n        <div class="q-pa-md" style="max-width: 350px">\n        <q-item clickable v-ripple>\n        <q-item-section>\n          <q-item-label> varaible ${a+1}</q-item-label>\n          <q-item-label caption>valor = ${e.datos}</q-item-label>\n        </q-item-section>\n      </q-item>\n    </div>\n    `)).join("")}\n    `})};return(0,o.bv)((()=>{navigator.onLine&&a.notify({message:"Conectado a internet",color:"positive",icon:"mdi-check"})})),(e,a)=>{const l=(0,o.up)("q-btn"),r=(0,o.up)("q-input"),t=(0,o.up)("q-card-section"),n=(0,o.up)("q-card-actions"),s=(0,o.up)("q-card"),c=(0,o.up)("q-form"),d=(0,o.up)("q-responsive");return(0,o.wg)(),(0,o.j4)(d,{ratio:1,class:"row"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",u,[(0,o.Wm)(l,{onClick:V,color:"primary",label:"Ver datos"}),(0,o.Wm)(l,{onClick:w,color:"negative",label:"Limpiar base de datos"}),(0,o.Wm)(l,{onClick:g,color:"secondary",label:"Recuperar Datos"})]),(0,o.Wm)(c,{ref:"form",onSubmit:m},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Wm)(t,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(b.value,((e,a)=>((0,o.wg)(),(0,o.j4)(r,{key:a,label:"Variable "+(a+1),modelValue:e.datos,"onUpdate:modelValue":a=>e.datos=a,type:"number"},null,8,["label","modelValue","onUpdate:modelValue"])))),128))])),_:1}),(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{type:"submit",color:"primary",label:"Guardar"}),(0,o.Wm)(l,{type:"reset",color:"negative",label:"Limpiar"})])),_:1})])),_:1})])),_:1},512)])])),_:1})}}};var d=l(1639),v=l(4458),b=l(3190),m=l(490),p=l(1233),g=l(3115),w=l(9893),V=l(4455),q=l(8326),f=l(7471),C=l(1821),h=l(1136),y=l(9984),D=l.n(y);const k=(0,d.Z)(c,[["__scopeId","data-v-09c4ea51"]]),x=k;D()(c,"components",{QCard:v.Z,QCardSection:b.Z,QItem:m.Z,QItemSection:p.Z,QItemLabel:g.Z,QResponsive:w.Z,QBtn:V.Z,QForm:q.Z,QInput:f.Z,QCardActions:C.Z}),D()(c,"directives",{Ripple:h.Z})}}]);